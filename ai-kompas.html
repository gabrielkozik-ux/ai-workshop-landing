<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Kompas | Který nástroj je pro vás ten pravý?</title>
    
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Specifické styly pro quiz */
        #ai-kompas-app { text-align: center; }
        .btn {
            display: inline-block;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            color: var(--white);
            padding: 15px 35px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            transition: all 0.3s ease;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5); }
        .btn.secondary {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            box-shadow: none;
        }
        .btn.secondary:hover { background: var(--primary-color); color: var(--white); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }

        #progress-bar { height: 8px; background-color: var(--light-gray); border-radius: 99px; overflow: hidden; margin: 0 auto 20px; max-width: 500px; }
        #progress-bar-inner { height: 100%; width: 0%; background-color: var(--secondary-color); transition: width 0.3s ease; }
        
        #answers-container { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; max-width: 600px; margin-left: auto; margin-right: auto;}
        .answer-btn { 
            display: flex; align-items: center; gap: 15px; width: 100%; 
            background-color: var(--white); color: var(--primary-color); 
            border: 1px solid rgba(226, 232, 240, 0.8); 
            text-align: left; padding: 20px; font-size: 1rem; border-radius: 12px; 
            cursor: pointer; transition: all 0.2s ease; 
        }
        .answer-btn:hover { border-color: var(--secondary-color); background-color: #f0f9ff; }
        .answer-btn.selected { border-color: var(--secondary-color); background-color: #f0f9ff; border-width: 2px; }
        
        .result-card {
            background: var(--white);
            border: 1px solid rgba(226, 232, 240, 0.8);
            border-radius: 16px;
            padding: 30px;
            text-align: left;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05);
        }
        .result-card.primary { border: 2px solid var(--secondary-color); background-color: #f0f9ff; }
        .result-card .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .logo-icon img { width: 40px; height: 40px; object-fit: contain; }
        
        .hidden { display: none !important; }
        
        /* Share buttons */
        .share-buttons { margin-top: 20px; display: flex; gap: 10px; justify-content: center; }
        .share-btn { 
            padding: 8px 16px; border-radius: 6px; color: white; font-size: 0.9em; font-weight: 600; 
            display: inline-flex; align-items: center; gap: 5px;
        }
        .share-btn.linkedin { background: #0077b5; }
        .share-btn.facebook { background: #1877f2; }
    </style>
</head>
<body>

    <nav class="main-nav">
        <a href="index.html" class="nav-logo">
            <img src="favicon.ico" alt="AI Workshop">
            <span>AI Workshop</span>
        </a>
        <div class="nav-links">
            <a href="index.html">Zpět na workshop</a>
            <a href="index.html#kontakt" class="nav-cta-button">Poptat školení</a>
        </div>
    </nav>

    <header class="hero hero-small">
        <div class="container">
            <h1>AI Kompas</h1>
            <p>Zjistěte, který AI nástroj nejlépe odpovídá vašemu stylu.</p>
        </div>
    </header>

    <main>
        <section id="ai-kompas-app">
            <div class="container">
                <!-- Intro -->
                <div id="intro">
                    <h2 class="section-title">Odhalte svůj AI Archetyp</h2>
                    <p class="section-subtitle">5krokový test pro výběr ideálního nástroje.</p>
                    <button id="start-btn" class="btn">Spustit test</button>
                </div>

                <!-- Quiz -->
                <div id="quiz" class="hidden">
                    <div id="progress-bar"><div id="progress-bar-inner"></div></div>
                    <p id="step-pill" style="color: #64748b; font-weight: 600;"></p>
                    <h2 id="question-text" style="font-size: 2em; margin-bottom: 10px;"></h2>
                    <p id="question-subtitle" style="color: #64748b;"></p>
                    <div id="answers-container"></div>
                    <div id="quiz-nav" style="margin-top: 30px; display: flex; justify-content: space-between; max-width: 600px; margin-left: auto; margin-right: auto;">
                        <button id="back-btn" class="btn secondary">← Zpět</button>
                        <div>
                            <button id="next-btn" class="btn">Další →</button>
                            <button id="finish-btn" class="btn">Dokončit ✓</button>
                        </div>
                    </div>
                </div>

                <!-- Results -->
                <div id="results" class="hidden">
                    <h2 id="results-title" class="section-title">Váš výsledek</h2>
                    <div id="primary-result"></div>
                    
                    <!-- VRÁCENÉ SDÍLECÍ TLAČÍTKA -->
                    <div style="text-align: center; margin-top: 20px;">
                        <p>Líbil se vám test? Sdílejte ho:</p>
                        <div class="share-buttons">
                            <a href="#" id="share-linkedin" class="share-btn linkedin" target="_blank">LinkedIn</a>
                            <a href="#" id="share-facebook" class="share-btn facebook" target="_blank">Facebook</a>
                        </div>
                    </div>

                    <div id="secondary-results-container" style="margin-top: 40px;">
                        <h3>Další možnosti</h3>
                        <div id="secondary-results" class="card-grid"></div>
                    </div>
                    <div style="margin-top: 40px;">
                        <button id="show-all-btn" class="btn secondary">Zobrazit všechny nástroje</button>
                    </div>
                    <div id="catalog" class="hidden card-grid" style="margin-top: 30px;">
                        <div id="catalog-list"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter sekce odstraněna -->

        <!-- VRÁCENÁ SEKCE: PROPOJIT -->
        <section id="propojit" style="background-color: var(--light-gray);">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Kontaktujte mě</h2>
                    <p class="section-subtitle">Jsem tu pro vás.</p>
                </div>
                <div class="cta-grid">
                    <a href="mailto:kozik@iustoria.cz" class="cta-button">Napsat e-mail</a>
                    <a href="tel:+420720265713" class="cta-button secondary">Zavolat</a>
                </div>
            </div>
        </section>
        
        <section class="back-link-section">
            <div class="container">
                 <a href="index.html" class="cta-button">Zpět na hlavní stránku workshopu</a>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <h4>Mgr. Gabriel Kožík</h4>
                <p>AI Stratég & Advokát</p>
            </div>
            
            <div class="footer-links">
                <a href="licence.html">Průvodce Compliance</a>
                <a href="srovnani.html">Srovnání Nástrojů</a>
                <a href="https://www.gabrielkozik.com" target="_blank">O lektorovi</a>
            </div>
            
            <div class="social-icons-container">
                <a href="https://www.linkedin.com/in/gabriel-kozik/" target="_blank" class="social-icon"><img src="linkedin.png" alt="LinkedIn"></a>
                <a href="https://www.facebook.com/somslovak" target="_blank" class="social-icon"><img src="facebook.png" alt="Facebook"></a>
                <a href="https://www.instagram.com/kozik_gabriel/" target="_blank" class="social-icon"><img src="instagram.png" alt="Instagram"></a>
                <a href="https://www.youtube.com/@gabriel-kozik" target="_blank" class="social-icon"><img src="youtube.png" alt="YouTube"></a>
            </div>
            
            <div class="copyright">
                <p>&copy; 2026 Mgr. Gabriel Kožík. Všechna práva vyhrazena.</p>
            </div>
        </div>
    </footer>

    <!-- Script logika -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const JSON_PATH = "ai-tools.json";
        const quizQuestions = [
            { key: "Q1", title: "Hlavní cíl?", type: "multiple", answers: { A: "Marketing", B: "Analýza", C: "Automatizace" } },
            { key: "Q2", title: "Zdroje dat?", type: "single", answers: { A: "Internet", B: "Vlastní data", C: "Mix" } },
            { key: "Q3", title: "Přesnost vs. Kreativita?", type: "single", answers: { A: "Rychlost", B: "Solidní střed", C: "Maximální přesnost" } },
            { key: "Q4", title: "Styl výstupu?", type: "single", answers: { A: "Kreativní", B: "Věcný", C: "Formální" } },
            { key: "Q5", title: "Tech skill?", type: "single", answers: { A: "Klikací", B: "Učenlivý", C: "Geek" } }
        ];
        const WEIGHTS = { Q1: { A: { chatgpt: 3, gemini: 2, claude: 1 }, B: { perplexity: 3, gemini: 2, grok: 2, claude: 1 }, C: { claude: 3, chatgpt: 2, gemini: 1 } }, Q2: { A: { perplexity: 3, grok: 3, gemini: 1 }, B: { claude: 3, gemini: 2, chatgpt: 2 }, C: { gemini: 3, chatgpt: 2, perplexity: 1 } }, Q3: { A: { chatgpt: 3, grok: 2 }, B: { gemini: 3, claude: 2, chatgpt: 1 }, C: { perplexity: 3, claude: 2, gemini: 1 } }, Q4: { A: { chatgpt: 3, grok: 1 }, B: { gemini: 3, perplexity: 2, claude: 1 }, C: { claude: 3, chatgpt: 1, gemini: 1 } }, Q5: { A: { perplexity: 3, gemini: 2 }, B: { chatgpt: 3, gemini: 2, claude: 1 }, C: { claude: 3, chatgpt: 2, grok: 1 } } };
        const state = { tools: [], answers: {}, qIndex: 0 };
        const toolIcons = { chatgpt: 'chatgpt-icon.png', gemini: 'gemini-icon.png', claude: 'claude-icon.png', perplexity: 'perplexity-icon.webp', grok: 'grok-icon.png', default: '' };

        const $ = (s) => document.querySelector(s);
        const $intro = $('#intro'), $quiz = $('#quiz'), $results = $('#results');
        const $startBtn = $('#start-btn'), $nextBtn = $('#next-btn'), $finishBtn = $('#finish-btn'), $backBtn = $('#back-btn');
        const $questionText = $('#question-text'), $answersContainer = $('#answers-container');
        
        async function init() {
            try {
                const res = await fetch(JSON_PATH);
                state.tools = (await res.json()).tools || [];
            } catch (err) { console.error(err); }
            setupEventListeners();
            setupShareLinks();
        }

        function setupEventListeners() {
            $startBtn.addEventListener('click', startQuiz);
            $nextBtn.addEventListener('click', onNext);
            $backBtn.addEventListener('click', onBack);
            $finishBtn.addEventListener('click', onFinish);
            $('#show-all-btn').addEventListener('click', () => $('#catalog').classList.toggle('hidden'));
        }

        function setupShareLinks() {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent("Zjistil(a) jsem svůj AI archetyp v AI Kompasu. Zkuste to taky!");
            $('#share-linkedin').href = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}`;
            $('#share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
        }

        function startQuiz() {
            $intro.classList.add('hidden');
            $quiz.classList.remove('hidden');
            state.qIndex = 0;
            state.answers = {};
            quizQuestions.forEach(q => state.answers[q.key] = q.type === 'multiple' ? [] : null);
            renderQuestion();
        }

        function onNext() { if (state.qIndex < quizQuestions.length - 1) { state.qIndex++; renderQuestion(); } }
        function onBack() { if (state.qIndex > 0) { state.qIndex--; renderQuestion(); } }

        function renderQuestion() {
            const q = quizQuestions[state.qIndex];
            $questionText.textContent = q.title;
            $('#question-subtitle').textContent = q.type === 'multiple' ? 'Vyberte více možností' : 'Vyberte jednu možnost';
            $('#step-pill').textContent = `Krok ${state.qIndex + 1} / ${quizQuestions.length}`;
            $('#progress-bar-inner').style.width = `${((state.qIndex + 1) / quizQuestions.length) * 100}%`;
            
            $answersContainer.innerHTML = "";
            const currentAnswers = state.answers[q.key];

            Object.entries(q.answers).forEach(([key, label]) => {
                const btn = document.createElement("div");
                btn.className = "answer-btn";
                if ((q.type === 'multiple' && currentAnswers.includes(key)) || currentAnswers === key) btn.classList.add("selected");
                btn.innerHTML = `<span>${label}</span>`;
                btn.onclick = () => {
                    if (q.type === 'multiple') {
                        const idx = state.answers[q.key].indexOf(key);
                        idx > -1 ? state.answers[q.key].splice(idx, 1) : state.answers[q.key].push(key);
                    } else { state.answers[q.key] = key; }
                    renderQuestion();
                };
                $answersContainer.appendChild(btn);
            });
            updateNav();
        }

        function updateNav() {
            const ans = state.answers[quizQuestions[state.qIndex].key];
            const hasAns = Array.isArray(ans) ? ans.length > 0 : ans !== null;
            $nextBtn.classList.toggle('hidden', state.qIndex === quizQuestions.length - 1);
            $nextBtn.disabled = !hasAns;
            $finishBtn.classList.toggle('hidden', state.qIndex !== quizQuestions.length - 1);
            $finishBtn.disabled = !hasAns;
            $backBtn.disabled = state.qIndex === 0;
        }

        function onFinish() {
            const scores = {};
            state.tools.forEach(t => scores[t.id] = 0);
            for (const [qKey, ans] of Object.entries(state.answers)) {
                const keys = Array.isArray(ans) ? ans : [ans];
                keys.forEach(k => {
                    const map = WEIGHTS[qKey]?.[k] || {};
                    Object.entries(map).forEach(([tid, pts]) => { if(scores[tid] !== undefined) scores[tid] += pts; });
                });
            }
            const sorted = Object.entries(scores).map(([id, s]) => ({ id, score: s, tool: state.tools.find(t => t.id === id) })).sort((a,b) => b.score - a.score);
            
            renderResults(sorted);
            $quiz.classList.add('hidden');
            $results.classList.remove('hidden');
        }

        function renderResults(sorted) {
            if(!sorted.length) return;
            const primary = sorted[0];
            $('#primary-result').innerHTML = createCard(primary, true);
            $('#secondary-results').innerHTML = sorted.slice(1, 3).map(i => createCard(i)).join('');
            $('#catalog-list').innerHTML = sorted.map(i => createCard(i)).join('');
        }

        function createCard(item, isPrimary = false) {
            const t = item.tool || {};
            return `
            <div class="result-card ${isPrimary ? 'primary' : ''}">
                <div class="header">
                    <div style="display:flex; align-items:center; gap:15px;">
                        <div class="logo-icon"><img src="${toolIcons[t.id]}" alt="${t.name}"></div>
                        <div>
                            <h4 style="margin:0;">${t.name}</h4>
                            <span style="font-size:0.8em; color:var(--secondary-color); font-weight:700;">${t.archetype}</span>
                        </div>
                    </div>
                    <span style="font-weight:700; color:var(--primary-color);">${item.score} b.</span>
                </div>
                <p>${t.summary}</p>
            </div>`;
        }

        init();
    });
    </script>
</body>
</html>